<meta charset="utf-8">
<title>chi demo</title>
<style>
	* {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
		background-color: hsl(0, 0%, 10%);
		color: #00ff00;
		font-size: 1.3rem;
		font-family: monospace;
	}
	[screen] {
		display: flex;
	}
	[screen] [source]::before, [screen] [source]::after, [screen] [console]::before {
		top: 0.5rem;
		right: 0.5rem;
		position: absolute;
		color: hsl(0, 0%, 50%);
		font-size: 0.8rem;
		z-index: 1;
	}
	[screen] [source]::before {
		content: "(Source code)";
	}
	[screen] [console]::before {
		content: "(Chi console)";
	}
	[screen] [source]::after {
		content: "Press Ctrl + â†² to run.";
		top: auto;
		bottom: 0.5rem;
	}
	[source] {
		position: relative;
		flex: 1.5;
	}
	[console] {
		flex: 1;
	}
	[console] textarea {
		background-color: black;
	}
	[source] textarea, [screen] textarea {
		position: relative;
		width: 100%;
		height: 100%;
		border: none;
		border-right: 1px solid hsl(0, 0%, 15%);
		padding: 0.5rem;
	}
	[source] textarea:focus, [screen] textarea:focus {
		outline: none;
	}
</style>
<div screen>
	<div source>
		<textarea autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
	</div>
	<div console>
		<textarea autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" readonly></textarea>
	</div>
</div>
<script src="../dist/index.js"></script>
<script>
	const source = document.querySelector("[source] textarea");
	const consoleWindow = document.querySelector("[console] textarea");
	const defaultSource =
`let a = 1024:i16;
let b = a:i8;
a + b`;
	source.value = defaultSource;
	const runCode = () => {
		try {
			const { result } = chi.run(source.value);
			consoleWindow.value = result;
		}
		catch (e) {
			consoleWindow.value = e;
		}
	}
	runCode();
	addEventListener("keydown", e => {
		const { code, ctrlKey } = e;
		if (ctrlKey && code === "Enter") {
			runCode();
		}
	});
</script>